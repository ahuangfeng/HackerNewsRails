info:
  description: "This is the API documentation for our Hacker News"
  version: 0.0.1
  title: "Hacker News - G11D"
swagger: '2.0'
consumes:
  - application/json
produces:
  - application/xml
  - application/json
  - application/octet-stream
  - text/plain
host: localhost:3000 
basePath: "/api/v1"
tags:
  - name: Contributions
    description: "All Contributions REST calls"
  - name: Comments
    description: "All Comments REST calls"
  - name: Replies
    description: "All Replies REST calls"
  - name: Users
    description: "All Users REST calls"
schemes:
- "http"
- "https"
paths:
  /contributions:
    get:
      tags:
      - Contributions
      summary: "Return all the contributions. They can be filtered"
      operationId: getAllContributions
      produces:
      - application/json
      parameters:
      - in: query
        name: type
        required: false
        type: string
        enum: [ask, new]
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/Contribution'
        400:
          description: "Invalid query"
        401:
          description: "Not authorized"
      security:
      - api_key: []
    post:
      tags:
      - Contributions
      summary: "Create a new contribution"
      operationId: createContribution
      produces:
      - application/json
      parameters:
      - name: body
        in: body
        schema:
          $ref: "#/definitions/ContributionBody"
      responses:
        201:
          description: "Successfully created"
          schema:
            $ref: '#/definitions/Contribution'
        400:
          description: "Bad Request"
        401:
          description: "Not authorized"
        409:
          description: "Contribution already exists"
      security:
      - api_key: []
  /contributions/{id}:
    get:
      tags:
      - Contributions
      summary: "Return a contribution"
      operationId: getContributionById
      produces:
      - application/json
      parameters:
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/Contribution'
        401:
          description: "Not authorized"
        404:
          description: "Contribution not found"
      security:
      - api_key: []
    put:
      tags:
      - Contributions
      summary: "Update a contribution"
      operationId: updateContribution
      produces:
      - application/json
      parameters:
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: body
        in: body
        schema:
          $ref: "#/definitions/UpdateContributionBody"
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/Contribution'
        404:
          description: "Contribution not found"
        401:
          description: "Not authorized"
      security:
      - api_key: []
    delete:
      tags:
      - Contributions
      summary: "Delete a contribution"
      operationId: deleteContribution
      produces:
      - application/json
      parameters:
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      responses:
        200:
          description: "Successful operation"
        401:
          description: "Not authorized"
        404:
          description: "Contribution not found"
      security:
      - api_key: []
  /users:
    post:
      tags:
      - Users
      summary: "Creates a user"
      operationId: createUser
      produces:
      - application/json
      parameters:
      - name: body
        in: body
        schema:
          $ref: "#/definitions/CreateUserBody"
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/User'
        404:
          description: "User not found"
        401:
          description: "Not authorized"
  /users/{id}:
    get:
      tags:
      - Users
      summary: "Return a user"
      operationId: getUser
      produces:
      - application/json
      parameters:
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Users
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/User'
        400:
          description: "Invalid query"
        401:
          description: "Not authorized"
      security:
      - api_key: []
    put:
      tags:
      - Users
      summary: "Update a user"
      operationId: updateUser
      produces:
      - application/json
      parameters:
      - name: id
        in: path
        type: string
        required: true
        description: Id of the User
      - name: body
        in: body
        schema:
          $ref: "#/definitions/UpdateUserBody"
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/User'
        404:
          description: "User not found"
        401:
          description: "Not authorized"
      security:
      - api_key: []
    delete:
      tags:
      - Users
      summary: "Deletes a user and all its data"
      operationId: deleteUser
      produces:
      - application/json
      parameters:
      - name: id
        in: path
        type: string
        required: true
        description: Id of the User
      responses:
        200:
          description: "Successful operation"
        404:
          description: "User not found"
        401:
          description: "Not authorized"
      security:
      - api_key: []
  /contributions/{contribution_id}/comments:
    get:
      tags:
      - Comments
      summary: "Return all the comments from a contribution."
      operationId: getCommetsfromContributions
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      responses:
        200:
          description: "Successful operation"
          schema:
              $ref: "#/definitions/Comment"
        401:
          description: "Not authorized"
        404:
          description: "Contribution not found"
      security:
      - api_key: []
    post:
      tags:
      - Comments
      summary: "Create a new comment on a contribution"
      operationId: createComment
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: body
        in: body
        schema:
          $ref: "#/definitions/CommentBody"
      responses:
        201:
          description: "Successfully created"
          schema:
            $ref: '#/definitions/Comment'
        401:
          description: "Not authorized"
        404:
          description: "Contribution not found"
      security:
      - api_key: []
  /contributions/{contribution_id}/comments/{id}:
    get:
      tags:
      - Comments
      summary: "Return a comment from a contribution"
      operationId: getCommetfromContribution
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Comment
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: "#/definitions/Comment"
        401:
          description: "Not authorized"
        404:
          description: "Not found"
      security:
      - api_key: []
    put:
      tags:
      - Comments
      summary: "Update a comment from a contribution"
      operationId: updateComment
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Comment
      - name: body
        in: body
        schema:
          $ref: "#/definitions/UpdateCommentBody"
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/Comment'
        404:
          description: "Not found"
        401:
          description: "Not authorized"
      security:
      - api_key: []
    delete:
      tags:
      - Comments
      summary: "Delete a comment from a contribution"
      operationId: deleteComment
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Comment
      responses:
        200:
          description: "Successful operation"
        401:
          description: "Not authorized"
        404:
          description: "Not found"
      security:
      - api_key: []
  /contributions/{contribution_id}/comments/{comment_id}/replies:
    get:
      tags:
      - Replies
      summary: "Return all the replies from a comment"
      operationId: getAllReplies
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: comment_id
        in: path
        type: string
        required: true
        description: Id of the Comment
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/Reply'
        401:
          description: "Not authorized"
      security:
      - api_key: []
    post:
      tags:
      - Replies
      summary: "Create a new reply on a comment"
      operationId: createReply
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: comment_id
        in: path
        type: string
        required: true
        description: Id of the Comment
      - name: body
        in: body
        schema:
          $ref: "#/definitions/ReplyBody"
      responses:
        201:
          description: "Successfully created"
          schema:
            $ref: '#/definitions/Reply'
        401:
          description: "Not authorized"
        404:
          description: "Not found"
      security:
      - api_key: []
  /contributions/{contribution_id}/comments/{comment_id}/replies/{id}:
    get:
      tags:
      - Replies
      summary: "Return a reply from a comment"
      operationId: getReply
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: comment_id
        in: path
        type: string
        required: true
        description: Id of the Comment
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Reply
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/Reply'
        401:
          description: "Not authorized"
        404:
          description: "Not found"
      security:
      - api_key: []
    put:
      tags:
      - Replies
      summary: "Update a reply"
      operationId: updateReply
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: comment_id
        in: path
        type: string
        required: true
        description: Id of the Comment
      - name: id
        in: path
        type: string
        required: true
        description: Id of the Reply
      - name: body
        in: body
        schema:
          $ref: "#/definitions/UpdateReplyBody"
      responses:
        200:
          description: "Successful operation"
          schema:
            $ref: '#/definitions/Reply'
        404:
          description: "Not found"
        401:
          description: "Not authorized"
      security:
      - api_key: []
    delete:
      tags:
      - Replies
      summary: "Delete a reply from a comment"
      operationId: deleteReply
      produces:
      - application/json
      parameters:
      - name: contribution_id
        in: path
        type: string
        required: true
        description: Id of the Contribution
      - name: comment_id
        in: path
        type: string
        required: true
        description: Id of the Comment
      - name: id
        in: path
        type: string
        required: true
      responses:
        200:
          description: "Successful operation"
        401:
          description: "Not authorized"
        404:
          description: "Not found"
      security:
      - api_key: []

securityDefinitions:
  api_key:
    type: apiKey
    name: Authorization
    in: header
definitions:
  ContributionBody:
    type: "object"
    properties:
      title:
        type: "string"
      text:
        type: "string"
      url:
        type: "string"
  CommentBody:
    type: "object"
    properties:
      body:
        type: "string"
  CreateUserBody:
    type: "object"
    properties:
      name:
        type: "string"
      email:
        type: "string"
      about:
        type: "string"
  ReplyBody:
    type: "object"
    properties:
      body:
        type: "string"
  UpdateContributionBody:
    type: "object"
    properties:
      title:
        type: "string"
      url:
        type: "string"
      text:
        type: "string"
  UpdateUserBody:
    type: "object"
    properties:
      name:
        type: "string"
      email:
        type: "string"
      about:
        type: "string"
  UpdateCommentBody:
    type: "object"
    properties:
      body:
        type: "string"
  UpdateReplyBody:
    type: "object"
    properties:
      body:
        type: "string"
  Contribution:
    type: "object"
    properties:
      id:
        type: "number"
      title:
        type: "string"
      url:
        type: "string"
      text:
        type: "string"
      username:
        type: "string"
      createdAt:
        type: "string"
      numComments:
        type: "number"
        default: 0
      points:
        type: "number"
    xml:
      name: "Contribution"
  User:
    type: "object"
    properties:
      id:
        type: "number"
      name:
        type: "string"
      email:
        type: "string"
      about:
        type: "string"
      createdAt:
        type: "string"
      api-key:
        type: "string"
  Comment: 
    type: "object"
    properties:
      id:
        type: "string"
      points: 
        type: "number"
      username:
        type: "string"
      createdAt:
        type: "string"
      body:
        type: "string"
  Reply:
    type: "object"
    properties:
      id:
        type: "string"
      points:
        type: "number"
      username:
        type: "string"
      createdAt:
        type: "string"
      body:
        type: "string"